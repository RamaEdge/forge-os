# ForgeOS ca-certificates Package Build Script
# Alpine-style APKBUILD for ca-certificates
# Uses centralized version management

pkgname="ca-certificates"
pkgver="${CA_CERTIFICATES_VERSION}"
pkgrel="0"
pkgdesc="Common CA certificates"
url="https://www.mozilla.org/en-US/about/governance/policies/security-group/certs/"
arch="aarch64"
license="MPL-2.0"
depends=""
makedepends=""
checkdepends=""
subpackages=""

# Use local download from centralized package system
source="file://$(PROJECT_ROOT)/packages/downloads/cacert-${pkgver}.pem"

build() {
	cd "$builddir"
	# Convert PEM to APK format
	mkdir -p "$pkgdir/usr/share/ca-certificates"
	cp "$srcdir/cacert-${pkgver}.pem" "$pkgdir/usr/share/ca-certificates/ca-certificates.crt"
}

package() {
	cd "$builddir"
	# Install certificates
	mkdir -p "$pkgdir/usr/share/ca-certificates"
	cp "$srcdir/cacert-${pkgver}.pem" "$pkgdir/usr/share/ca-certificates/ca-certificates.crt"
}